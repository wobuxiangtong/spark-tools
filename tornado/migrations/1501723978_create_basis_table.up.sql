CREATE TABLE IF NOT EXISTS `adx_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  timezone DECIMAL(3, 1) NOT NULL DEFAULT 0,
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
	gross_clk_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	uniq_clk_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	gross_conv_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,	
	valid_conv_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	notify_conv_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	kpi_event_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	net_profit DECIMAL(12,2) UNSIGNED NOT NULL DEFAULT 0,
	tac DECIMAL(12,2) UNSIGNED NOT NULL DEFAULT 0,
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	PRIMARY KEY(dated, unionk),
	KEY adx_daily_summary_campaign_id(campaign_id),
	KEY adx_daily_summary_group_id(group_id),
	KEY adx_daily_summary_affiliate(aff_id, aff_pub)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `gmt_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
	gross_clk_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	uniq_clk_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	gross_conv_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,	
	valid_conv_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	notify_conv_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	kpi_event_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
	net_profit DECIMAL(12,2) UNSIGNED NOT NULL DEFAULT 0,
	tac DECIMAL(12,2) UNSIGNED NOT NULL DEFAULT 0,
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	PRIMARY KEY(dated, unionk),
	KEY gmt_daily_summary_campaign_id(campaign_id),
	KEY gmt_daily_summary_group_id(group_id),
	KEY gmt_daily_summary_affiliate(aff_id, aff_pub)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `adx_clk_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  timezone DECIMAL(3, 1) NOT NULL DEFAULT 0,
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
  country_code CHAR(2) NOT NULL DEFAULT "",
  province_geoname_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  city_geoname_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  os VARCHAR(10) NOT NULL DEFAULT "",
  device_type VARCHAR(10) NOT NULL DEFAULT "",
  device_make VARCHAR(20) NOT NULL DEFAULT "",
  device_model VARCHAR(20) NOT NULL DEFAULT "",
  gross_cnt int(11) UNSIGNED NOT NULL DEFAULT 0,
  uniq_cnt int(11) UNSIGNED NOT NULL DEFAULT 0,
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(dated, unionk),
  KEY adx_clk_daily_summary_campaign_id(campaign_id),
  KEY adx_clk_daily_summary_group_id(group_id),
  KEY adx_clk_daily_summary_affiliate(aff_id, aff_pub),
  KEY adx_clk_daily_summary_region(country_code, province_geoname_id, city_geoname_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `gmt_clk_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
  country_code CHAR(2) NOT NULL DEFAULT "",
  province_geoname_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  city_geoname_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  os VARCHAR(10) NOT NULL DEFAULT "",
  device_type VARCHAR(10) NOT NULL DEFAULT "",
  device_make VARCHAR(20) NOT NULL DEFAULT "",
  device_model VARCHAR(20) NOT NULL DEFAULT "",
  gross_cnt int(11) UNSIGNED NOT NULL DEFAULT 0,
  uniq_cnt int(11) UNSIGNED NOT NULL DEFAULT 0,
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(dated, unionk),
  KEY gmt_clk_daily_summary_campaign_id(campaign_id),
  KEY gmt_clk_daily_summary_group_id(group_id),
  KEY gmt_clk_daily_summary_affiliate(aff_id, aff_pub),
  KEY gmt_clk_daily_summary_region(country_code, province_geoname_id, city_geoname_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `adx_conv_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  timezone DECIMAL(3, 1) NOT NULL DEFAULT 0,
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
  gross_cnt INT(11) NOT NULL DEFAULT 0,
  valid_cnt INT(11) NOT NULL DEFAULT 0,
  notify_cnt INT(11) NOT NULL DEFAULT 0,
  income DECIMAL(5, 2) NOT NULL DEFAULT 0, 
  income_currency CHAR(3) NOT NULL DEFAULT "",
  payout  DECIMAL(5, 2) NOT NULL DEFAULT 0,
  payout_currency CHAR(3) NOT NULL DEFAULT "",
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(dated, unionk),
  KEY adx_conv_daily_summary_campaign_id(campaign_id),
  KEY adx_conv_daily_summary_group_id(group_id),
  KEY adx_conv_daily_summary_affiliate(aff_id, aff_pub),
  KEY adx_conv_daily_summary_income(income, income_currency),
  KEY adx_conv_daily_summary_payout(payout, payout_currency)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `gmt_conv_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
  gross_cnt INT(11) NOT NULL DEFAULT 0,
  valid_cnt INT(11) NOT NULL DEFAULT 0,
  notify_cnt INT(11) NOT NULL DEFAULT 0,
  income DECIMAL(5, 2) NOT NULL DEFAULT 0, 
  income_currency CHAR(3) NOT NULL DEFAULT "",
  payout  DECIMAL(5, 2) NOT NULL DEFAULT 0,
  payout_currency CHAR(3) NOT NULL DEFAULT "",
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(dated, unionk),
  KEY gmt_conv_daily_summary_campaign_id(campaign_id),
  KEY gmt_conv_daily_summary_group_id(group_id),
  KEY gmt_conv_daily_summary_affiliate(aff_id, aff_pub),
  KEY gmt_conv_daily_summary_income(income, income_currency),
  KEY gmt_conv_daily_summary_payout(payout, payout_currency)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `adx_invalid_conv_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  timezone DECIMAL(3,1) NOT NULL DEFAULT 0,
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
  invalid_type CHAR(4) NOT NULL DEFAULT "E000",
  invalid_cnt INT(11) NOT NULL DEFAULT 0,
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(dated, unionk),
  KEY adx_invalid_conv_daily_summary_campaign_id(campaign_id),
  KEY adx_invalid_conv_daily_summary_group_id(group_id),
  KEY adx_invalid_conv_daily_summary_affiliate(aff_id, aff_pub),
  KEY adx_invalid_conv_daily_summary_invalidtype(invalid_type)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `gmt_event_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
  event_value TINYINT(3) UNSIGNED NOT NULL DEFAULT 0,
  gross_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  uniq_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in1_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in2_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in7_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in15_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in30_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  total_amount DECIMAL(10,2) UNSIGNED NOT NULL DEFAULT 0,
  currency CHAR(3) NOT NULL DEFAULT 'USD',
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(dated, unionk),
  KEY gmt_event_daily_summary_campaign_id(campaign_id),
  KEY gmt_event_daily_summary_group_id(group_id),
  KEY gmt_event_daily_summary_affiliate(aff_id, aff_pub)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);

CREATE TABLE IF NOT EXISTS `adx_event_daily_summary` (
  dated DATE,
  unionk CHAR(32) NOT NULL DEFAULT '',
  timezone DECIMAL(3,1) NOT NULL DEFAULT 0,
  campaign_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  group_id INT(11) UNSIGNED NOT NULL DEFAULT 0,
  algorithm TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
  aff_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
  aff_pub VARCHAR(160) NOT NULL DEFAULT "",
  event_value TINYINT(3) UNSIGNED NOT NULL DEFAULT 0,
  gross_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  uniq_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in1_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in2_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in7_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in15_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  in30_retention_cnt INT(11) UNSIGNED NOT NULL DEFAULT 0,
  total_amount DECIMAL(10,2) UNSIGNED NOT NULL DEFAULT 0,
  currency CHAR(3) NOT NULL DEFAULT 'USD',
  last_modified_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY(dated, unionk),
  KEY adx_event_daily_summary_campaign_id(campaign_id),
  KEY adx_event_daily_summary_group_id(group_id),
  KEY adx_event_daily_summary_affiliate(aff_id, aff_pub)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(TO_DAYS(dated)) (
  PARTITION p0 VALUES LESS THAN (TO_DAYS("2017-10-01")),
  PARTITION p1 VALUES LESS THAN (TO_DAYS("2018-01-01")),
  PARTITION p2 VALUES LESS THAN (TO_DAYS("2018-04-01")),
  PARTITION p3 VALUES LESS THAN (TO_DAYS("2018-07-01")),
  PARTITION p4 VALUES LESS THAN (TO_DAYS("2018-10-01")),
  PARTITION p5 VALUES LESS THAN (TO_DAYS("2019-01-01")),
  PARTITION p6 VALUES LESS THAN (TO_DAYS("2019-04-01")),
  PARTITION p7 VALUES LESS THAN (TO_DAYS("2019-07-01")),
  PARTITION p8 VALUES LESS THAN (TO_DAYS("2019-10-01")),
  PARTITION p9 VALUES LESS THAN (TO_DAYS("2020-01-01")),
  PARTITION p10 VALUES LESS THAN (TO_DAYS("2020-04-01")),
  PARTITION p11 VALUES LESS THAN (TO_DAYS("2020-07-01")),
  PARTITION p12 VALUES LESS THAN (TO_DAYS("2020-10-01")),
  PARTITION p13 VALUES LESS THAN (TO_DAYS("2099-01-01"))
);
